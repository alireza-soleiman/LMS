{% extends "base.html" %}
{% block title %}Dashboard ‚Äî {{ user.username }}{% endblock %}
{% block content %}

<style>
  body {
    background: #f7f9fc;
    font-family: "Inter", sans-serif;
  }
  h2 {
    font-weight: 600;
    color: #1e293b;
  }
  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.2rem;
  }
  .dashboard-header .btn {
    border-radius: 0.5rem;
  }
  .card {
    border: none;
    border-radius: 1rem;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    transition: all 0.2s ease;
  }
  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 22px rgba(0,0,0,0.08);
  }
  .progress {
    height: 8px;
    border-radius: 10px;
  }
  .progress-bar {
    background: linear-gradient(90deg, #2563eb, #4f46e5);
  }
  .btn-outline-primary {
    border: 1px solid #2563eb;
    color: #2563eb;
    border-radius: 0.5rem;
  }
  .btn-outline-primary:hover {
    background: #2563eb;
    color: #fff;
  }
  .btn-success {
    border-radius: 0.5rem;
  }
  .empty-state {
    text-align: center;
    margin-top: 10vh;
  }
  .empty-state img {
    width: 180px;
    opacity: 0.9;
  }
  .empty-state p {
    color: #64748b;
  }
</style>

<div class="container py-4">
  <div class="dashboard-header">
    <h2>Welcome, {{ user.username }} üëã</h2>
    {% if not user.is_staff %}
      <a href="{% url 'create_project' %}" class="btn btn-success">+ Create New Project</a>
    {% endif %}
  </div>

  {% if project_cards %}
    <div class="row g-4">
      {% for card in project_cards %}
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 p-3">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="fw-semibold text-primary mb-0">{{ card.project.title }}</h5>
            {% if user.is_staff %}
              <span class="badge text-bg-light">Owner: {{ card.project.owner.username }}</span>
            {% endif %}
          </div>
          <p class="text-muted small mb-2">{{ card.project.description|default:"No description yet" }}</p>

          <div class="progress mb-3">
            <div class="progress-bar" role="progressbar" style="width: {{ card.percent }}%" aria-valuenow="{{ card.percent }}" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          <p class="small text-muted mb-3">{{ card.completed }}/{{ card.total }} Workshops completed ({{ card.percent }}%)</p>

          <div class="d-flex justify-content-between">
            <a href="{% url 'project_overview' card.project.id %}" class="btn btn-outline-primary btn-sm">üìù Edit Overview</a>
            <a href="{% url 'workshop_list' card.project.id %}" class="btn btn-primary btn-sm">üöÄ Continue to Workshops</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-state">
      <img src="https://cdn-icons-png.flaticon.com/512/1048/1048940.png" alt="No Project">
      <h4 class="mt-3">No Projects Yet</h4>
      <p class="mb-3">Start by creating your first project to begin your workshop journey.</p>
      <a href="{% url 'create_project' %}" class="btn btn-success px-4 py-2">+ Create New Project</a>
    </div>
  {% endif %}
</div>

{% endblock %}
